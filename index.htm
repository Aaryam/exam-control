<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School'd</title>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    
</body>
<script>

    var socket = io();

    function setUsername() {
        socket.emit('setUsername', document.getElementById('name').value);
    };
    var user;
    socket.on('userExists', function (data) {
        document.getElementById('error-container').innerHTML = data;
    });
    socket.on('userSet', function (data) {
        user = data.username;
        document.body.innerHTML = '<center><input type = "text" id = "message" class="inputbox">\
         <button type = "button" name = "button" onclick = "sendMessage()" class="mainbutton">Send</button></center>\
         <div id = "message-container"></div>';
    });
    function sendMessage() {
        var msg = document.getElementById('message').value;
        if (msg) {
            socket.emit('msg', { message: msg, user: user });
        }
    }
    socket.on('newmsg', function (data) {
        if (user) {
            document.getElementById('message-container').innerHTML += '<div>' +
                data.user + ': ' + data.message + '</div>'
        }
    })
</script>
</html>